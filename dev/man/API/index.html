<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · SatelliteToolboxPropagators.jl</title><meta name="title" content="API · SatelliteToolboxPropagators.jl"/><meta property="og:title" content="API · SatelliteToolboxPropagators.jl"/><meta property="twitter:title" content="API · SatelliteToolboxPropagators.jl"/><meta name="description" content="Documentation for SatelliteToolboxPropagators.jl."/><meta property="og:description" content="Documentation for SatelliteToolboxPropagators.jl."/><meta property="twitter:description" content="Documentation for SatelliteToolboxPropagators.jl."/><meta property="og:url" content="https://juliaspace.github.io/SatelliteToolboxPropagators.jl/stable/man/API/"/><meta property="twitter:url" content="https://juliaspace.github.io/SatelliteToolboxPropagators.jl/stable/man/API/"/><link rel="canonical" href="https://juliaspace.github.io/SatelliteToolboxPropagators.jl/stable/man/API/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="SatelliteToolboxPropagators.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">SatelliteToolboxPropagators.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../quick_start/">Quick Start</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><span class="tocitem">Propagators</span><ul><li><a class="tocitem" href="../propagators/j2/">J2</a></li><li><a class="tocitem" href="../propagators/j2osc/">J2 Osculating</a></li><li><a class="tocitem" href="../propagators/j4/">J4</a></li><li><a class="tocitem" href="../propagators/j4osc/">J4 Osculating</a></li><li><a class="tocitem" href="../propagators/sgp4/">SGP4/SDP4</a></li><li><a class="tocitem" href="../propagators/twobody/">Two-Body</a></li></ul></li><li><a class="tocitem" href="../../lib/library/">Library</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSpace/SatelliteToolboxPropagators.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSpace/SatelliteToolboxPropagators.jl/blob/main/docs/src/man/API.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><p><strong>SatelliteToolboxPropagators.jl</strong> has a propagator API to improve the usability. This API has the following requirements, which must be met by all propagators that uses it.</p><p>Every propagator must have a structure derived from <code>OrbitPropagator</code> with the following requirement:</p><pre><code class="language-julia hljs">struct OrbitPropagator&lt;Propagator name&gt;{Tepoch, T} &lt;: OrbitPropagator{Tepoch, T}
    &lt;Any field required by the propagator&gt;
end</code></pre><p>where <code>Tepoch</code> is the type used to represent the epoch of the input elements, whereas <code>T</code> is the type used for the internal variables.</p><h2 id="Initialization"><a class="docs-heading-anchor" href="#Initialization">Initialization</a><a id="Initialization-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization" title="Permalink"></a></h2><p>The initialization is performed by the function:</p><pre><code class="language-julia hljs">Propagators.init(T, args...; kwargs...)</code></pre><p>where <code>T = Val(&lt;Orbit propagator symbol&gt;)</code>, and it must return and object of type <code>OrbitPropagator&lt;Propagator name&gt;</code>. The arguments and keywords depends on the propagator and must be documented in the docstring. The propagator must record the epoch during the initialization, which must be kept constant during the entire object existence. It also needs to record the instant of the last propagation.</p><h2 id="Epoch"><a class="docs-heading-anchor" href="#Epoch">Epoch</a><a id="Epoch-1"></a><a class="docs-heading-anchor-permalink" href="#Epoch" title="Permalink"></a></h2><p>Each propagator must return the initial element epoch in Julian Day by the function:</p><pre><code class="language-julia hljs">Propagators.epoch(orbp)</code></pre><p>Notice that this value must never change during the existence of the object <code>orbp</code>.</p><h2 id="Last-Instant"><a class="docs-heading-anchor" href="#Last-Instant">Last Instant</a><a id="Last-Instant-1"></a><a class="docs-heading-anchor-permalink" href="#Last-Instant" title="Permalink"></a></h2><p>Each propagator must return the last propagation instant [s] measured from the epoch. This action must be performed by the function:</p><pre><code class="language-julia hljs">Propagators.last_instant(orbp)</code></pre><h2 id="Propagation"><a class="docs-heading-anchor" href="#Propagation">Propagation</a><a id="Propagation-1"></a><a class="docs-heading-anchor-permalink" href="#Propagation" title="Permalink"></a></h2><p>The following functions must be overloaded by each propagator.</p><pre><code class="language-julia hljs">Propagators.propagate!(orbp, t)</code></pre><p>Propagate the orbit of propagator <code>orbp</code> by <code>t</code> [s] from the epoch. This function must return the propagated position and velocity represented in the same reference frame used in the initialization. <strong>The output vector must use the SI</strong>.</p><pre><code class="language-julia hljs">Propagators.step!(orbp, dt)</code></pre><p>Propagate the orbit of propagator <code>orbp</code> by <code>dt</code> [s] from the instant of the last propagation. This function must return the propagated position and velocity represented in the same reference frame used in the initialization. <strong>The output vector must use the SI</strong>.</p><blockquote><p><strong>Note</strong> The API provides a default implementation for <code>Propagators.step!</code>. Hence, strictly speaking, only the implementation of <code>Propagators.propagate!</code> is required for the API. However, there are some cases in which it is more accurate to implement <code>Propagators.step!</code> and use this algorithm to build the function <code>Propagators.propagate!</code>. In those cases, the user must overload both functions.</p></blockquote><p>We also have the function <code>Propagators.propagate_to_epoch!</code>, but the default implementation should work for all propagators.</p><h2 id="In-place-initialization-(Optional)"><a class="docs-heading-anchor" href="#In-place-initialization-(Optional)">In-place initialization (Optional)</a><a id="In-place-initialization-(Optional)-1"></a><a class="docs-heading-anchor-permalink" href="#In-place-initialization-(Optional)" title="Permalink"></a></h2><p>If the propagator supports in-place initialization, it must overload the following function:</p><pre><code class="language-julia hljs">Propagators.init!(orbp::OrbitPropagator&lt;Propagator name&gt;, args...; kwargs...)</code></pre><h2 id="Mean-Elements-(Optional)"><a class="docs-heading-anchor" href="#Mean-Elements-(Optional)">Mean Elements (Optional)</a><a id="Mean-Elements-(Optional)-1"></a><a class="docs-heading-anchor-permalink" href="#Mean-Elements-(Optional)" title="Permalink"></a></h2><p>The function</p><pre><code class="language-julia hljs">Propagators.mean_elements(orbp)</code></pre><p>should return the mean elements using the structure <code>KeplerianElements</code> related to the latest propagation. Notice that this is an <strong>optional</strong> feature. If the propagator does not implement it, it will return <code>nothing</code>.</p><h2 id="Name-(Optional)"><a class="docs-heading-anchor" href="#Name-(Optional)">Name (Optional)</a><a id="Name-(Optional)-1"></a><a class="docs-heading-anchor-permalink" href="#Name-(Optional)" title="Permalink"></a></h2><p>The propagator can overload the function:</p><pre><code class="language-julia hljs">Propagators.name(orbp)</code></pre><p>to return its name. The system uses this information to display the object using the function <code>show</code>. If the function is not provided, the structure name is used by default.</p><h2 id="Simultaneous-Initialization-and-Propagation-(Optional)"><a class="docs-heading-anchor" href="#Simultaneous-Initialization-and-Propagation-(Optional)">Simultaneous Initialization and Propagation (Optional)</a><a id="Simultaneous-Initialization-and-Propagation-(Optional)-1"></a><a class="docs-heading-anchor-permalink" href="#Simultaneous-Initialization-and-Propagation-(Optional)" title="Permalink"></a></h2><p>If the propagator supports, it can overload the functions:</p><pre><code class="language-julia hljs">Propagators.propagate(t, args...; kwargs...)</code></pre><p>that simultaneously initialize and propagate the orbit to the instant <code>t</code> [s] after the input elements. <code>args...</code> and <code>kwargs...</code> must be the same as in the initialization function <code>Propagators.init</code>.</p><h3 id="Fitting-Mean-Elements-(Optional)"><a class="docs-heading-anchor" href="#Fitting-Mean-Elements-(Optional)">Fitting Mean Elements (Optional)</a><a id="Fitting-Mean-Elements-(Optional)-1"></a><a class="docs-heading-anchor-permalink" href="#Fitting-Mean-Elements-(Optional)" title="Permalink"></a></h3><p>The propagator can implement the following functions to fit a set of osculating state vectors into mean elements for its theory:</p><pre><code class="language-julia hljs">Propagators.fit_mean_elements(T, vjd::AbstractVector{Tjd}, vr_i::AbstractVector{Tv}, vv_i::AbstractVector{Tv}; kwargs...) where {Tjd&lt;:Number, Tv&lt;:AbstractVector}
Propagators.fit_mean_elements!(orbp::OrbitPropagator&lt;Propagator name&gt;, vjd::AbstractVector{Tjd}, vr_i::AbstractVector{Tv}, vv_i::AbstractVector{Tv}; kwargs...) where {Tjd&lt;:Number, Tv&lt;:AbstractVector}</code></pre><p>where <code>T = Val(&lt;Orbit propagator symbol&gt;)</code>, <code>vr_i</code> and <code>vv_i</code> are a set of position [m] and velocity [m / s] vectors obtained at the instants in <code>vjd</code> [Julian Day]. Those functions must return the mean elements used to initialize the propagator in the function <code>Propagator.init</code>.</p><p>Each propagator type can define its own set of keyword arguments to configure the fitting process.</p><p>The first signature will allocate a new propagator, whereas the second will use the allocated one passed as the first argument. In the latter, the propagator needs to be initialized with the fitted elements.</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.1 on <span class="colophon-date" title="Friday 14 June 2024 22:59">Friday 14 June 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
